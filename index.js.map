{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst pixabayInstance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '54647501-b4d3f23177e1e060f98944b22',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n  },\n});\n\nexport async function getImagesByQuery(query = '', page = 1) {\n  const res = await pixabayInstance.get('', {\n    params: {\n      q: query,\n      page,\n    },\n  });\n  return {\n    hits: res.data.hits,\n    totalHits: res.data.totalHits,\n  };\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet myGallery = new SimpleLightbox('.gallery a', {\n  animationSpeed: 250,\n  fadeSpeed: 300,\n  captionDelay: 250,\n  captionsData: 'alt',\n  navText: [\n    '<span><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M17.031 2.469C17.1008 2.53867 17.1563 2.62143 17.1941 2.71255C17.2319 2.80367 17.2513 2.90135 17.2513 3C17.2513 3.09865 17.2319 3.19633 17.1941 3.28745C17.1563 3.37857 17.1008 3.46133 17.031 3.531L8.5605 12L17.031 20.469C17.1718 20.6098 17.2509 20.8008 17.2509 21C17.2509 21.1992 17.1718 21.3902 17.031 21.531C16.8902 21.6718 16.6992 21.7509 16.5 21.7509C16.3008 21.7509 16.1098 21.6718 15.969 21.531L6.969 12.531C6.89915 12.4613 6.84374 12.3786 6.80593 12.2874C6.76812 12.1963 6.74866 12.0986 6.74866 12C6.74866 11.9013 6.76812 11.8037 6.80593 11.7125C6.84374 11.6214 6.89915 11.5387 6.969 11.469L15.969 2.469C16.0387 2.39915 16.1214 2.34374 16.2125 2.30593C16.3037 2.26812 16.4013 2.24866 16.5 2.24866C16.5986 2.24866 16.6963 2.26812 16.7874 2.30593C16.8786 2.34374 16.9613 2.39915 17.031 2.469Z\" fill=\"white\"/></svg></span>',\n    '<span><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"white\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.96912 2.469C7.03879 2.39915 7.12155 2.34374 7.21267 2.30593C7.30379 2.26812 7.40147 2.24866 7.50012 2.24866C7.59877 2.24866 7.69645 2.26812 7.78757 2.30593C7.87869 2.34374 7.96145 2.39915 8.03112 2.469L17.0311 11.469C17.101 11.5387 17.1564 11.6214 17.1942 11.7125C17.232 11.8037 17.2515 11.9013 17.2515 12C17.2515 12.0986 17.232 12.1963 17.1942 12.2874C17.1564 12.3786 17.101 12.4613 17.0311 12.531L8.03112 21.531C7.89029 21.6718 7.69928 21.7509 7.50012 21.7509C7.30096 21.7509 7.10995 21.6718 6.96912 21.531C6.82829 21.3902 6.74917 21.1992 6.74917 21C6.74917 20.8008 6.82829 20.6098 6.96912 20.469L15.4396 12L6.96912 3.531C6.89927 3.46133 6.84386 3.37857 6.80605 3.28745C6.76824 3.19633 6.74878 3.09865 6.74878 3C6.74878 2.90135 6.76824 2.80367 6.80605 2.71255C6.84386 2.62143 6.89927 2.53867 6.96912 2.469Z\" fill=\"white\"/></svg></span>',\n  ],\n  closeText:\n    '<span><svg width=\"32\" height=\"32\" viewBox=\"0 0 32 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.29208 9.29199C9.38497 9.19886 9.49532 9.12497 9.61681 9.07456C9.7383 9.02415 9.86854 8.9982 10.0001 8.9982C10.1316 8.9982 10.2619 9.02415 10.3833 9.07456C10.5048 9.12497 10.6152 9.19886 10.7081 9.29199L16.0001 14.586L21.2921 9.29199C21.3851 9.19901 21.4954 9.12526 21.6169 9.07494C21.7384 9.02462 21.8686 8.99872 22.0001 8.99872C22.1316 8.99872 22.2618 9.02462 22.3832 9.07494C22.5047 9.12526 22.6151 9.19901 22.7081 9.29199C22.8011 9.38496 22.8748 9.49534 22.9251 9.61682C22.9754 9.7383 23.0013 9.8685 23.0013 9.99999C23.0013 10.1315 22.9754 10.2617 22.9251 10.3832C22.8748 10.5046 22.8011 10.615 22.7081 10.708L17.4141 16L22.7081 21.292C22.8011 21.385 22.8748 21.4953 22.9251 21.6168C22.9754 21.7383 23.0013 21.8685 23.0013 22C23.0013 22.1315 22.9754 22.2617 22.9251 22.3832C22.8748 22.5046 22.8011 22.615 22.7081 22.708C22.6151 22.801 22.5047 22.8747 22.3832 22.925C22.2618 22.9754 22.1316 23.0012 22.0001 23.0012C21.8686 23.0012 21.7384 22.9754 21.6169 22.925C21.4954 22.8747 21.3851 22.801 21.2921 22.708L16.0001 17.414L10.7081 22.708C10.6151 22.801 10.5047 22.8747 10.3832 22.925C10.2618 22.9754 10.1316 23.0012 10.0001 23.0012C9.86859 23.0012 9.73839 22.9754 9.61691 22.925C9.49543 22.8747 9.38505 22.801 9.29208 22.708C9.1991 22.615 9.12535 22.5046 9.07503 22.3832C9.02471 22.2617 8.99881 22.1315 8.99881 22C8.99881 21.8685 9.02471 21.7383 9.07503 21.6168C9.12535 21.4953 9.1991 21.385 9.29208 21.292L14.5861 16L9.29208 10.708C9.19895 10.6151 9.12507 10.5047 9.07465 10.3833C9.02424 10.2618 8.99829 10.1315 8.99829 9.99999C8.99829 9.86845 9.02424 9.73821 9.07465 9.61672C9.12507 9.49523 9.19895 9.38488 9.29208 9.29199Z\" fill=\"white\"/></svg></span>',\n});\n\nconst galImg = document.querySelector('ul.gallery');\nconst sniper = document.querySelector('.loader');\nexport const loadMoreBtn = document.querySelector('.load-more-btn');\n\nexport function createGallery(images) {\n  if (images.length < 1) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      backgroundColor: `rgba(148, 128, 14, 0.8)`,\n      messageColor: `#ffffff`,\n      position: `topRight`,\n      maxWidth: `432px`,\n    });\n  }\n  const markup = images\n    .map(\n      item => `<li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${item.largeImageURL}\"\n                ><img\n                  class=\"gallery-image\"\n                  src=\"${item.webformatURL}\"\n                  alt=\"${item.tags}\"\n              /></a>\n              <ul class=\"gallery-item-data\">\n                <li class=\"gallery-data-label\">\n                  <h4 class=\"gallery-data-name\">Likes</h4>\n                  <p class=\"gallery-data-value\">${item.likes}</p>\n                </li>\n                <li class=\"gallery-data-label\">\n                  <h4 class=\"gallery-data-name\">Views</h4>\n                  <p class=\"gallery-data-value\">${item.views}</p>\n                </li>\n                <li class=\"gallery-data-label\">\n                  <h4 class=\"gallery-data-name\">Comments</h4>\n                  <p class=\"gallery-data-value\">${item.comments}</p>\n                </li>\n                <li class=\"gallery-data-label\">\n                  <h4 class=\"gallery-data-name\">Downloads</h4>\n                  <p class=\"gallery-data-value\">${item.downloads}</p>\n                </li>\n              </ul>\n          </li>`\n    )\n    .join('');\n  galImg.insertAdjacentHTML('beforeend', markup);\n  myGallery.refresh();\n}\n\nexport function clearGallery() {\n  galImg.innerHTML = '';\n}\n\nexport function showLoader() {\n  sniper.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  sniper.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.add('is-btn-visible');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.remove('is-btn-visible');\n}\n\nexport function autoScroll() {\n  const liElement = document.querySelector('li.gallery-item');\n  const heigthLi = 2 * liElement.getBoundingClientRect().height;\n  window.scrollBy({\n    top: heigthLi,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  loadMoreBtn,\n  autoScroll,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst formEl = document.querySelector('.form-search');\nconst inpSearch = formEl.elements['search-text'];\n\nconst store = {\n  perPage: 15,\n  page: 1,\n  totalPages: 1,\n  query: '',\n  actionIsLastPage() {\n    if (this.page < this.totalPages) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: 'We`re sorry, but you`ve reached the end of search results.',\n        backgroundColor: `rgba(148, 128, 14, 0.8)`,\n        messageColor: `#ffffff`,\n        position: `topRight`,\n        maxWidth: `432px`,\n      });\n    }\n  },\n};\n\nformEl.addEventListener('submit', async e => {\n  e.preventDefault();\n  hideLoadMoreButton();\n\n  store.page = 1;\n  store.query = inpSearch.value.trim();\n  inpSearch.value = '';\n\n  if (store.query === '') {\n    iziToast.show({\n      message: 'Please enter a search query!',\n      backgroundColor: `rgba(148, 128, 14, 0.8)`,\n      messageColor: `#ffffff`,\n      position: `topRight`,\n      maxWidth: `432px`,\n    });\n    clearGallery();\n    return;\n  }\n\n  clearGallery();\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(store.query, store.page);\n    store.totalPages = Math.ceil(data.totalHits / store.perPage);\n    if (data.totalHits < 1) {\n      iziToast.show({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: `rgba(148, 128, 14, 0.8)`,\n        messageColor: `#ffffff`,\n        position: `topRight`,\n        maxWidth: `432px`,\n      });\n      return;\n    }\n    createGallery(data.hits);\n    store.actionIsLastPage();\n  } catch {\n    error => {\n      iziToast.error({\n        message: `Error ${error.message}`,\n        position: 'topright',\n      });\n    };\n  } finally {\n    hideLoader();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async e => {\n  store.page += 1;\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(store.query, store.page);\n    createGallery(data.hits);\n    autoScroll();\n    // setTimeout(autoScroll, 1500);\n    store.actionIsLastPage();\n  } catch {\n    error => {\n      iziToast.error({\n        message: `Error ${error.message}`,\n        position: 'topright',\n      });\n    };\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["pixabayInstance","axios","getImagesByQuery","query","page","res","myGallery","SimpleLightbox","galImg","sniper","loadMoreBtn","createGallery","images","iziToast","markup","item","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","autoScroll","heigthLi","formEl","inpSearch","store","e","data"],"mappings":"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"}